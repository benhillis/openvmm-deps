#!/bin/sh

set -e

mkdir -p "$SYSROOT/bin"

links="
busybox
less
pgrep
truncate
vlock
beep
ifplugd
[[
printf
popmaildir
kbd_mode
ifenslave
netstat
sed
svc
volname
fsck
chpasswd
iprule
dumpkmap
ftpput
script
dnsdomainname
ar
more
gunzip
ifconfig
tac
hwclock
sync
vi
remove-shell
fsync
crontab
showkey
dpkg
tcpsvd
run-parts
free
tc
factor
sv
arch
awk
tty
i2cdump
sha3sum
man
nice
lpq
cal
devmem
cmp
hd
tar
reboot
basename
sha512sum
eject
bootchartd
wall
raidautorun
fstrim
sort
ubiupdatevol
which
mim
chrt
mount
date
usleep
linuxrc
unlzop
ntpd
chmod
setsid
traceroute
modinfo
start-stop-daemon
tunctl
su
ftpd
lsusb
linux32
login
fbset
df
mkdosfs
lpd
groups
telnetd
swapoff
users
ipcs
wget
mkfs.minix
lzop
ssl_client
xzcat
whoami
nl
killall5
mkfs.vfat
lzma
bc
stty
ed
unzip
adjtimex
ifdown
diff
gzip
zcat
powertop
fgrep
fsfreeze
dmesg
rm
fdformat
mv
ftpget
cat
deallocvt
setserial
syslogd
chattr
flock
realpath
find
iplink
telnet
ifup
i2cdetect
watchdog
smemcap
lsscsi
rx
fdisk
printenv
du
hdparm
grep
tee
lpr
dpkg-deb
ttysize
nanddump
setkeycodes
mkdir
findfs
ash
hexedit
split
strings
switch_root
halt
envdir
mkfifo
ipneigh
nslookup
lzopcat
kill
mkswap
poweroff
iptunnel
fdflush
pipe_progress
tr
umount
rtcwake
rev
i2ctransfer
fakeidentd
passwd
nologin
uniq
dumpleases
bunzip2
ps
freeramdisk
resize
clear
chgrp
crc32
add-shell
ipaddr
rdev
setarch
deluser
setfattr
whois
lspci
dnsd
fbsplash
reset
uuencode
ubirmvol
cttyhack
ipcrm
tftpd
cp
ip
getty
rpm
ping6
ubirsvol
unix2dos
zcip
pwdx
linux64
xargs
who
stat
patch
sleep
chroot
svok
conspy
unlzma
nmeter
logger
hush
xxd
xz
mesg
rmdir
readprofile
ubiattach
wc
nc
adduser
ubidetach
top
arp
egrep
fold
lzcat
mke2fs
link
ascii
sum
expand
modprobe
rdate
depmod
install
traceroute6
dirname
sulogin
fuser
fgconsole
mpstat
comm
false
loadfont
dc
setfont
hostname
fatattr
bbconfig
rmmod
unlink
nameif
time
addgroup
uevent
sh
ipcalc
ether-wake
uudecode
unexpand
nohup
head
getopt
openvt
chat
mkpasswd
udhcpc
iostat
mkfs.ext2
sysctl
hexdump
route
insmod
mountpoint
blkdiscard
shred
resume
true
cryptpw
test
vconfig
logname
touch
cpio
i2cget
env
losetup
md5sum
uname
unxz
ubirename
ubimkvol
iproute
rpm2cpio
ls
base64
sha1sum
bzip2
softlimit
slattach
w
httpd
mktemp
pwd
scriptreplay
uncompress
nbd-client
pstree
crond
envuidgid
id
pivot_root
makedevs
pscan
microcom
runsvdir
killall
udhcpd
dos2unix
dhcprelay
mdev
blkid
sendmail
chown
hostid
shuf
mknod
tail
last
runsv
svlogd
brctl
ionice
setconsole
delgroup
lsof
init
bzcat
unshare
arping
timeout
partprobe
acpid
lsmod
fsck.minix
ping
ts
echo
sha256sum
readlink
dd
lsattr
paste
od
nandwrite
chpst
i2cset
setpriv
tftp
reformime
chvt
runlevel
[
inetd
renice
mt
pkill
base32
setlogcons
run-init
pmap
udpsvd
blockdev
swapon
klogd
expr
readahead
nproc
pidof
watch
cksum
yes
loadkmap
logread
setuidgid
uptime
seq
ln
cut
makemime
"

for link in $links; do
    if [ ! -f "$SYSROOT/usr/bin/$link" ]; then
        ln "$SYSROOT/usr/sbin/busybox" "$SYSROOT/usr/bin/$link"
    fi
done
